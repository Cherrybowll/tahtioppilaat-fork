{% extends "layout.html" %}

{% block title %}
My Bibliography Manager
{% endblock %}

{% block body %}
<h2>My Bibliography Manager</h2>

<div>
  <p>Manage your scientific references with ease. Select your preferred input method below.</p>
</div>

<div style="display: flex; gap: 40px; margin-top: 20px;">
  <!-- Left Column - Input Forms -->
  <div style="flex: 0 0 400px;">
    <form action="/create_reference" method="post" id="referenceForm">
      <!-- DOI Section -->
      <details style="margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; padding: 10px;">
        <summary style="cursor: pointer; padding: 8px; font-weight: bold; user-select: none;">
          Option 1: Add by DOI
        </summary>
        <div style="margin-top: 15px;">
          <label for="doi">DOI:</label><br>
          <input 
            type="text" 
            id="doi" 
            name="doi" 
            placeholder="Enter the DOI here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
        </div>
      </details>

      <!-- Article Section -->
      <details style="margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; padding: 10px;">
        <summary style="cursor: pointer; padding: 8px; font-weight: bold; user-select: none;">
          Option 2: Add Article
        </summary>
        <div style="margin-top: 15px;">
          <label for="article_author">Author:</label><br>
          <input 
            type="text" 
            id="article_author" 
            name="article_author" 
            placeholder="Enter the author(s) here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="article_title">Title:</label><br>
          <input 
            type="text" 
            id="article_title" 
            name="article_title" 
            placeholder="Enter the title here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="article_journal">Journal:</label><br>
          <input 
            type="text" 
            id="article_journal" 
            name="article_journal" 
            placeholder="Enter the journal name..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="article_year">Year:</label><br>
          <input 
            type="number" 
            id="article_year" 
            name="article_year" 
            placeholder="Enter publication year..." 
            min="1800"
            max="2024"
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
        </div>
      </details>

      <!-- Inproceedings Section -->
      <details style="margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; padding: 10px;">
        <summary style="cursor: pointer; padding: 8px; font-weight: bold; user-select: none;">
          Option 3: Add Conference Paper
        </summary>
        <div style="margin-top: 15px;">
          <label for="inproceeding_author">Author:</label><br>
          <input 
            type="text" 
            id="inproceeding_author" 
            name="inproceeding_author" 
            placeholder="Enter the author(s) here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="inproceeding_title">Title:</label><br>
          <input 
            type="text" 
            id="inproceeding_title" 
            name="inproceeding_title" 
            placeholder="Enter the title here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="inproceeding_book_title">Book Title (Conference Proceedings):</label><br>
          <input 
            type="text" 
            id="inproceeding_book_title" 
            name="inproceeding_book_title" 
            placeholder="Enter the conference proceedings name..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="inproceeding_year">Year:</label><br>
          <input 
            type="number" 
            id="inproceeding_year" 
            name="inproceeding_year" 
            placeholder="Enter publication year..." 
            min="1800"
            max="2024"
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
        </div>
      </details>

      <!-- Book Section -->
      <details style="border: 1px solid #ddd; border-radius: 4px; padding: 10px;">
        <summary style="cursor: pointer; padding: 8px; font-weight: bold; user-select: none;">
          Option 4: Add Book
        </summary>
        <div style="margin-top: 15px;">
          <label for="book_author">Author:</label><br>
          <input 
            type="text" 
            id="book_author" 
            name="book_author" 
            placeholder="Enter the author(s) here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="book_title">Title:</label><br>
          <input 
            type="text" 
            id="book_title" 
            name="book_title" 
            placeholder="Enter the title here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="book_book_title">Book_Title:</label><br>
          <input 
            type="text" 
            id="book_book_title" 
            name="book_book_title" 
            placeholder="Enter the title here..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="book_publisher">Publisher:</label><br>
          <input 
            type="text" 
            id="book_publisher" 
            name="book_publisher" 
            placeholder="Enter the publisher name..." 
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
          <br><br>
          <label for="book_year">Year:</label><br>
          <input 
            type="number" 
            id="book_year" 
            name="book_year" 
            placeholder="Enter publication year..." 
            min="1800"
            max="2024"
            style="width: 300px; padding: 8px; margin-top: 5px;"
          >
        </div>
      </details>

      <button 
        type="submit" 
        style="margin-top: 20px; margin-left: 10px; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;"
        onclick="return true"
      >
        Add Reference
      </button>
    </form>
  </div>

  <!-- Right Column - Display References -->
  <div style="flex: 1; max-width: 800px;">
    <div style="margin-top: 30px;">
      <h3>Articles:</h3>
      <ul>
        {% for article in articles %}
          <li>{{article}}</li>
        {% endfor %}
      </ul>
      
      <h3>Conference Papers:</h3>
      <ul>
        {% for inproceeding in inproceedings %}
          <li>{{inproceeding}}</li>
        {% endfor %}
      </ul>

      <h3>Books:</h3>
      <ul>
        {% for book in books %}
          <li>{{book}}</li>
        {% endfor %}
      </ul>

      <h3>DOIs:</h3>
      <ul>
        {% for doi in dois %}
          <li>{{doi}}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<script>


// Add event listeners to ensure only one section is open at a time
document.addEventListener('DOMContentLoaded', function() {
    const detailsElements = document.querySelectorAll('details');
    
    detailsElements.forEach(details => {
        details.addEventListener('click', (e) => {
            if (e.target.tagName === 'SUMMARY') {
                detailsElements.forEach(otherDetails => {
                    if (otherDetails !== details) {
                        otherDetails.removeAttribute('open');
                    }
                });
            }
        });
    });
});
</script>
{% endblock %}